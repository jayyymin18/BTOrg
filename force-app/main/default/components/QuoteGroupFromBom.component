<apex:component controller="QuoteGroupFromBom" access="global">
    <apex:attribute type="id" name="relatedTo_id" assignTo="{!relatedToId}" description="RelatedTo" />
    <apex:attribute type="string" name="querystringfields" assignTo="{!querystring}" description="querystring" access="global"/>

    <div>
        <table border="0" cellspacing="0">

            <apex:outputPanel rendered="{!if(firstGrouping , true ,false)}">
                <tr style="font-weight: bold;">
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"> </th>
                    <apex:repeat value="{!quoteLineWrapper.RecordsDataWrapperList[0].RecordDataList}" var="quoteItem">
                        <th style="border-right: 1px solid #ccc; font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; background-color: #ddd; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                            {!sortlablevalueMap[quoteItem.fieldName]}
                        </th>
                    </apex:repeat>
                </tr>

                <apex:repeat value="{!quoteLineWrapper.groupWrapperList}" var="group1">
                    <tr>
                        <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                            {!group1.groupName}
                        </th>
                    </tr>

                    <apex:repeat value="{!group1.RecordsDataWrapperList}" var="quoteItemWrapper">
                        <tr>
                            <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                            <apex:repeat value="{!quoteItemWrapper.RecordDataList}" var="quoteItem">
                                <td style="border-right: 1px solid #ccc; font-size: 14px; padding: 5px 15px; color:black; border-bottom: 1px solid #ccc; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                                    <apex:outputPanel rendered="{!if(quoteItem.fieldType == 'currency' , true ,false)}">
                                        {!orgCurr}
                                    </apex:outputPanel>
                                    {!quoteItem.fieldValue}
                                </td>
                            </apex:repeat>
                        </tr>
                    </apex:repeat>

                </apex:repeat>
            </apex:outputPanel>



            <apex:outputPanel rendered="{!if(secondGrouping , true ,false)}">
                <tr style="font-weight: bold;">
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <apex:repeat value="{!quoteLineWrapper.RecordsDataWrapperList[0].RecordDataList}" var="quoteItem">
                        <th style="border-right: 1px solid #ccc; font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; background-color: #ddd; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                            {!sortlablevalueMap[quoteItem.fieldName]}
                        </th>
                    </apex:repeat>
                </tr>

                <apex:repeat value="{!quoteLineWrapper.groupWrapperList}" var="group1">
                    <tr>
                        <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                            {!group1.groupName}
                        </th>
                    </tr>
                    <apex:repeat value="{!group1.groupWrapperList}" var="group2">
                        <tr>
                            <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                <span style="padding-left: 30px;"> </span>
                                <span> {!group2.groupName} </span>
                            </th>
                        </tr>
                        
                        <apex:repeat value="{!group2.RecordsDataWrapperList}" var="quoteItemWrapper">
                            <tr>
                                <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                <apex:repeat value="{!quoteItemWrapper.RecordDataList}" var="quoteItem">
                                    <td style="border-right: 1px solid #ccc; font-size: 14px; padding: 5px 15px; color:black; border-bottom: 1px solid #ccc; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                                        <apex:outputPanel rendered="{!if(quoteItem.fieldType == 'currency' , true ,false)}">
                                            {!orgCurr}
                                        </apex:outputPanel>
                                        {!quoteItem.fieldValue}
                                    </td>
                                </apex:repeat>
                            </tr>
                        </apex:repeat>
                    </apex:repeat>
                </apex:repeat>
            </apex:outputPanel>

            

            <apex:outputPanel rendered="{!if(thirdGrouping , true ,false)}">
                <tr style="font-weight: bold;">
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <apex:repeat value="{!quoteLineWrapper.RecordsDataWrapperList[0].RecordDataList}" var="quoteItem">
                        <th style="border-right: 1px solid #ccc; font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; background-color: #ddd; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                            {!sortlablevalueMap[quoteItem.fieldName]}
                        </th>
                    </apex:repeat>
                </tr>

                <apex:repeat value="{!quoteLineWrapper.groupWrapperList}" var="group1">
                    <tr>
                        <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                            {!group1.groupName}
                        </th>
                    </tr>
                    <apex:repeat value="{!group1.groupWrapperList}" var="group2">
                        <tr>
                            <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                <span style="padding-left: 30px;"> </span>
                                <span> {!group2.groupName} </span>
                            </th>
                        </tr>
                        <apex:repeat value="{!group2.groupWrapperList}" var="group3">
                            <tr>
                                <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                    <span style="padding-left: 30px;"> </span>
                                    <span style="padding-left: 30px;"> </span>
                                    <span> {!group3.groupName} </span>
                                </th>
                            </tr>

                            <apex:repeat value="{!group3.RecordsDataWrapperList}" var="quoteItemWrapper">
                                <tr>
                                    <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom:  1px solid #ccc;"></td>
                                    <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom:  1px solid #ccc;"></td>
                                    <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom:  1px solid #ccc;"></td>
                                    <apex:repeat value="{!quoteItemWrapper.RecordDataList}" var="quoteItem">
                                        <td style="border-right: 1px solid #ccc; font-size: 14px; padding: 5px 15px; color:black; border-bottom: 1px solid #ccc; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                                            <apex:outputPanel rendered="{!if(quoteItem.fieldType == 'currency' , true ,false)}">
                                                {!orgCurr}
                                            </apex:outputPanel>
                                            {!quoteItem.fieldValue}
                                        </td>
                                    </apex:repeat>
                                </tr>
                            </apex:repeat>
                        </apex:repeat>
                    </apex:repeat>
                </apex:repeat>
            </apex:outputPanel>



            <apex:outputPanel rendered="{!if(forthGrouping , true ,false)}">
                <tr style="font-weight: bold;">
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <th style="font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; text-align: left; background-color: #ddd;"></th>
                    <apex:repeat value="{!quoteLineWrapper.RecordsDataWrapperList[0].RecordDataList}" var="quoteItem">
                        <th style="border-right: 1px solid #ccc; font-size: 15px; border-bottom: 1px solid #ccc; padding: 5px 15px; background-color: #ddd; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                            {!sortlablevalueMap[quoteItem.fieldName]}
                        </th>
                    </apex:repeat>
                </tr>

                <apex:repeat value="{!quoteLineWrapper.groupWrapperList}" var="group1">
                    <tr>
                        <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                            {!group1.groupName}
                        </th>
                    </tr>
                    <apex:repeat value="{!group1.groupWrapperList}" var="group2">
                        <tr>
                            <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                <span style="padding-left: 30px;"> </span>
                                <span> {!group2.groupName} </span>
                            </th>
                        </tr>
                        <apex:repeat value="{!group2.groupWrapperList}" var="group3">
                            <tr>
                                <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                    <span style="padding-left: 30px;"> </span>
                                    <span style="padding-left: 30px;"> </span>
                                    <span> {!group3.groupName} </span>
                                </th>
                            </tr>
                            <apex:repeat value="{!group3.groupWrapperList}" var="group4">
                                <tr>
                                    <th colspan="{!quoteLineWrapper.totalCols}" style="font-size: 14px; padding: 5px 15px; color:white; text-align: left; border-bottom: 1px solid #ccc; background-color: rgb(27 82 151);">
                                        <span style="padding-left: 30px;"> </span>
                                        <span style="padding-left: 30px;"> </span>
                                        <span style="padding-left: 30px;"> </span>
                                        <span> {!group4.groupName} </span>
                                    </th>
                                </tr>
                                
                                <apex:repeat value="{!group4.RecordsDataWrapperList}" var="quoteItemWrapper">
                                    <tr>
                                        <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                        <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                        <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                        <td style="font-size: 14px; padding: 5px 15px; color:black; text-align: left; border-bottom: 1px solid #ccc;"></td>
                                        <apex:repeat value="{!quoteItemWrapper.RecordDataList}" var="quoteItem">
                                            <td style="border-right: 1px solid #ccc; font-size: 14px; padding: 5px 15px; color:black; border-bottom: 1px solid #ccc; {!if(OR(quoteItem.fieldType == 'currency', quoteItem.fieldType == 'number'),'text-align:right;' , 'text-align: left')}">
                                                <apex:outputPanel rendered="{!if(quoteItem.fieldType == 'currency' , true ,false)}">
                                                    {!orgCurr}
                                                </apex:outputPanel>
                                                {!quoteItem.fieldValue}
                                            </td>
                                        </apex:repeat>
                                    </tr>
                                </apex:repeat>
                            </apex:repeat>
                        </apex:repeat>
                    </apex:repeat>
                </apex:repeat>
            </apex:outputPanel>

        </table>
    </div>

</apex:component>